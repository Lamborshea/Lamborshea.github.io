---
title: 圣杯布局和双飞翼布局的实现方式
date: 2017-09-18 18:50:08
tags: 
  - 圣杯布局
  - 双飞翼布局
  - CSS
categories:
  - 前端
keywords:
  - 圣杯布局和双飞翼布局的区别
---
<!-- toc -->
  在经典的网页布局中，有一种布局方式很出名，就是圣杯布局，同时有一个圣杯布局的替代方案或者说叫优化方案，叫双飞翼布局，他们二者的出发点都是为了实现页面内容最大区域，中间栏的优先渲染和宽度自适应，以及实现两侧栏固定。
<!-- more -->
## 为什么会有圣杯布局和双飞翼布局？
这是二者最终生成的效果：  
![生成页面图](http://outf8u7ws.bkt.clouddn.com/shengbeibuju&shuangfeiyibuju.gif)
对于以内容为主题的网页，像电商网页以及轮胎，中间栏包含了网页内容中价值最高的部分。那么在网页 DOM 结构中，就让 main 栏位于结构的前面部分。旁边 left 和 right 部分的内容放在后面，在 CSS 中以浮动的方式渲染成正常状态。  
是因为网页在结构的内容渲染过程中，会按页面标签的顺序，依次加载内容，所以把网页主要内容以及价值最高的部分优先渲染出来，有利于提升网页用户体验。  
在 DOM结构中，都是这样的基本结构：
```html
<div class="container">
        <div class="main">main 窗前明月光，疑是地上霜，举头望明月，低头思故乡。</div>
        <!-- html 结构中，先写 main，再写 left 和 right -->
        <div class="left">left</div>
        <div class="right">right</div>
    </div>
```
## 圣杯布局实现方式

### 圣杯布局 DOM 结构

```html
<div class="wrapper">
  <div class="header">header</div>
    <div class="container">
        <div class="main">main 窗前明月光，疑是地上霜，举头望明月，低头思故乡。</div>
        <!-- html 结构中，先写 main，再写 left 和 right -->
        <div class="left">left</div>
        <div class="right">right</div>
    </div>
  <div class="footer">footer</div>
</div>
```
### 圣杯布局 CSS
```css
body {
    margin: 0;
}
.wrapper {
    width: 100%;
    height: 600px;
    background: gray;
}
.header {
    height: 100px;
}

.container {
    padding-left: 190px;
    padding-right: 230px;
    /* 对父元素设置内填充，长度分别左右栏的宽度 */
    overflow: hidden;
    /* 对父元素清除浮动 */
}

.main {
    float: left;
    width: 100%;
    height: 400px;
    background: lightgray;
}

.left {
    position: relative;
    right: 190px; 
    /* 对元素设置相对定位，偏移值为自身宽度，也是父元素.container 的 padding-left,从而将 main 元素的全部内容显出出来 */
    float: left;
    width: 190px;
    height: 400px;
    margin-left: -100%;
    /* 将 left 元素移上去 */
    background: lightblue;
}
.right {
    position: relative;
    left: 230px;
    /* 对元素设置相对定位，偏移值为自身宽度，也是父元素.container 的 padding-right 值,从而将 main 元素的全部内容显出出来 */
    float: left;
    width: 230px;
    height: 400px;
    margin-left: -230px;
    /* 将 right 元素移上去 */
    background: orange;
}
.footer {
    width: 100%;
    height: 100px;
}
```
如果不给父元素 .container 添加 padding-left 和 padding-right 值，以及未给左右元素添加相对定位的偏移值。那么 main 元素的内容将显示不全，如下图所示：  
![圣杯布局未添加padding值，以及未添加相对定位的偏移值 ](http://outf8u7ws.bkt.clouddn.com/shenbeibuju2.png)

## 双飞翼布局实现方式
圣杯布局有一个缺陷，那就是当 main 的宽度小于左栏或者右栏的宽度时，页面会乱掉。  
所以，双飞翼布局针对这点进行了优化。给 main 元素里面给元素内容再添加一个包裹层。然后不用再给 left 和 right 元素添加相对定位的偏移。

### 双飞翼布局 DOM
```html
<div class="wrapper">
  <div class="header">header</div>
    <div class="container">
        <div class="main">
            <div class="main-content">main 窗前明月光，疑是地上霜，举头望明月，低头思故乡。</div>
        </div>
        <!-- html 结构中，先写 main，再写 left 和 right -->
        <div class="left">left</div>
        <div class="right">right</div>
    </div>
  <div class="footer">footer</div>
</div>
```
### 双飞翼布局 CSS

```css
body {
    margin: 0;
}
.wrapper {
    width: 100%;
    height: 600px;
    background: gray;
}
.header {
    height: 100px;
}

.container {
    overflow: hidden;
    /* 清除浮动 */
}

.main {
    float: left;
    width: 100%;
    height: 400px;
    background: lightgray;
}

.main-content {
    margin-right: 230px;
    margin-left: 190px;
    /* 给 main 内容的包裹层添加左右 margin 值，分别对相应左右元素的宽度 */
}

.left {
    float: left;
    width: 190px;
    height: 400px;
    margin-left: -100%;
    background: lightblue;
}
.right {
    float: left;
    width: 230px;
    height: 400px;
    margin-left: -230px;
    background: orange;
}
.footer {
    width: 100%;
    height: 100px;
}
```

## 总结
  虽然这是很老的布局方案，因为现在基本上都是采用基于 border-size 的左右浮动 + margin 的方式建立栅格系统，以及即将在未来成为主流的 flex 定位方案。但是圣杯布局和双飞翼布局是针对于DOM 结构中内容优先的经典的网页布局方式，理解它的实现方式对于我们深入了解 margin负值的定位，结构和样式解耦（分离）有一定的帮助。
## 参考链接
1. [In Search of the Holy Grail · An A List Apart Article](https://alistapart.com/article/holygrail)